# Java异常机制
1. 异常提供了一种将错误代码从函数返回值分离出来的方法。错误情况是指函数逻辑之外的情况。
2. 函数参数空引用是一种运行时异常，属于编程错误，jvm提供了运行时检查，因此用户不用自己检查。
3. 假设函数不使用返回值报告异常情况，如果对于用户的输入（除空引用之外），函数不能产生符合函数约定的返回值，那么就是一种异常情况。此时可以抛出异常知用户，报告相应错误信息。
4. 用try捕获异常的前提是当前有足够的信息可以处理异常，要在catch块中做如下事情中的一件或者多件：       
    * 释放资源，保护数据，使程序处于正确的状态
    * 打印日志，显示错误信息，报告有错误发生以及错误的具体信息
    * 重新抛出异常，传递给调用者去处理
5. 一般使用异常终止模型而不使用异常恢复模型，在终止时要打印异常信息。
6. 对于不影响程序业务逻辑的异常，例如关闭连接，释放资源等等，可以只log而不终止业务执行。
7. 返回值为空的函数在函数体里处理错误时不能使用retrun而不做其它事情，因为这样不能将错误信息通知给调用者，最好使用异常。
8. 函数错误信息最好通过异常的方式报告给调用者。
9. 返回void又不抛异常的函数如果有出错的可能是不太好的，应该将错误信息以某种方式返回。例如：IStatus。
10. 串行逻辑函数出错就应该返回的函数用异常比较好；执行多个任务的函数，每个任务失败不影响其它任务的，使用MultiStatus比较好。
11. Status和异常可以互为补充：返回值不能为Status时，用异常；异常种类太多可以统一用IStatus返回。
12. 一个返回void且没有异常声明的函数通常是不好的编程方式。除非是一定不会出错或者无关紧要的错误，否则应该将错误返回给上一层，
过异常或者返回值的方式。
13. 返回IStatus的并行逻辑函数一般写法：定义jobStatus=OK_STATUS和一个subStatus数组；如果子task返回OK_STATUS，则jobStatus不变；返回CANCL_STATUS，则job=CANCEL_STATUS；否则将返回的Status添加到subStatus。这样可以确保：jobStatus为CANCEL时就代表CANCEL，为OK时可能为OK也可能为MultiStatus，需要根据subStatus.size()判断。通过IStatus可以建立起树形结构的异常信息，通过ErrorDialog可以将其显示出来。
14. 对于合适检查参数为null的想法：参数在函数内直接使用的情况下不用检查是否为null，因为解null引用自然会抛出NullReferenceException；而如果参不在本函数内直接使用则应该坚持，为null则抛出NullArgumentException异常。
15. 嵌套调用了很多层，在最底层如果抛出异常，异常会一直向上传递到被捕获的地方，业务逻辑终止。如果在最底层就捕获了这个异常并返回，这时剩下的业务逻辑要执行，可能会产生不可预测的结果。